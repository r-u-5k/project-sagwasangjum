--insert
--상품 넣기

insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'iPhone 13',1100000,'iphone_13_500.png','아름답고 견고한 디자인, 놀라운 배터리 사용 시간, 풍부한 듀얼 카메라 시스템',1);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'iPhone 14',1090000,'iphone_14_500.png','여전한 놀라움, Super Retina XDR 디스플레이, 인물 사진 모드',1);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'iPhone 14 Plus',1250000,'iphone_14_plus_500.png','여전한 놀라움, 17.0cm 디스플레이, 인물 사진 모드',1);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'iPhone 15',1250000,'iphone_15_500.png','새로움 물씬, 막강한 성능, 떴다 떴다 Dynamic Island',1);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'iPhone 15 Plus',1350000,'iphone_15_plus_500.png','속속들이 스며든 색상, 구석구석 견고한 글래스, 새롭게 찾아온 카메라',1);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'iPhone 15 Pro',1550000,'iphone_15_pro_500.png','궁극의 iPhone, 기가 막히게 빠른 기가급 전송, 진정 프로다운 배터리 성능
',1);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'iPhone 15 Pro Max',1900000,'iphone_15_pro_max_500.png','티타늄을 두르다, 괴물 프로세서, 상상 이상의 카메라',1);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'iPhone se',880000,'iphone_se_500.png','거침없는 파워, 실속 있는 선택, 스피드는 집안 내력
',1);

insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'iMac',1990000,'imac_500.png','이젠 더 파워풀, 당신을 표현하는 색깔, 얇다는 건 이런 것',2);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'MacBook Air 13 m3',1590000,'macbook_air13_m3_500.png','날렵하게, 강력하게, M3답게',2);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'MacBook Air 15 m3',1890000,'macbook_air15_m3_500.png','가뿐한 휴대성, 꿈같은 네 가지 컬러, 당신의 모든 최애 앱이 macOS에서 훨훨
',2);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'MacBook Pro 14 m3',2390000,'macbook_pro_14_m3_500.png','3나노미터 기술, GPU 아키텍처, 프로다운 성능과 역량',2);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'MacBook Pro 14 m3 Max',4790000,'macbook_pro_14_m3_max_500.png','게임의 판도를 바꾸는 그래픽 성능, 2.5배 빠른 렌더링, 하드웨어 가속형 레이 트레이싱
',2);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'MacBook Pro 14 m3 Pro',2990000,'macbook_pro_14_m3_pro_500.png','80% 더 빠른 CPU, Mac 사상 가장 긴 배터리 사용 시간, 노트북 사상 최고의 디스플레이',2);

insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'iPad Air',1249000,'ipad_air_500.png','전면적인 아름다움, 즐거움도 M1의 스피드로, 스트리밍도 공유도 이곳저곳에서',3);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'iPad Mini',769000,'ipad_mini_500.png','메가급 성능, 크기만 미니, iPad의 능력이 한 손 안에 쏙, 큰 아이디어가 현실이 되는 캔버스',3);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'iPad Pro',1749000,'ipad_pro_500.png','막강한 성능의 M2 칩 탑재, 빼어나고 찬란한 Liquid Retina XDR 디스플레이, 초고속 Wi-Fi로 쏜살같은 연결
',3);

insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'Apple Watch Series9',599000,'watch_series9_500.png','장 보면서 음악 재생하기, 보드 타는 중에 전화 받기, 국 젖는 동안 타이머 중단하기',4);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'Apple Watch Ultra2',1149000,'watch_ultra2_500.png','손끝을 톡톡, 시계를 척척, 한 차원 높은 모험
',4);

insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'AirPods 2세대',199000,'airpods2_500.png','선이 없다, 간결하다, 경이롭다, 진정한 의미의 무선
',5);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'AirPods 2세대 Magsafe',359000,'airpods2_magsafe_500.png','귀가 즐거워지는 성능, 올려두면 충전 시작, Siri는 오른팔
',5);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'AirPods 3세대',259000,'airpods3_500.png','온몸을 휘감는 3차원 오디오, 비가 와도 끄떡없는 생활 방수 기능, 베이스는 더 깊게, 하이톤은 더 맑게',5);
insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'AirPods 3세대 Magsafe',269000,'airpods3_magsafe_500.png','당신의 귀에 꼭 맞게 사운드를 조정해주는 적응형 EQ, 순식간에 완충되는 배터리, 바람까지 걸러주는 특수 마이크',5);

insert into product(p_no,p_name,p_price,p_image,p_content,p_category_no) values(product_p_no_seq.nextval,'AirPods Max',769000,'airpods_max_500.png','과감하고 독창적인 구조, 단조로움을 거부하는 5가지 색상, 지치지 않는 배터리로 앵콜 받습니다',5);

--상품 카테고리 넣기 
insert into product_category(p_category_no,p_category_name) values(1,'아이폰');
insert into product_category(p_category_no,p_category_name) values(2,'맥북');
insert into product_category(p_category_no,p_category_name) values(3,'아이패드');
insert into product_category(p_category_no,p_category_name) values(4,'워치');
insert into product_category(p_category_no,p_category_name) values(5,'에어팟');


--select
--상품전체 리스트 보여주기 (페이지)
select * from (
    select rownum idx, sorted_product.* from (
        select p_no, p_name, p_price, p_image, p_content, p_category_no from product ) sorted_product) rownum_product 
where idx >= 1 and idx <= 6;
--카테고리별 상품전체 리스트 보여주기 (페이지)
select * from (
    select rownum idx, sorted_product.* from (
        select p_no, p_name, p_price, p_image, p_content, p_category_no from product where p_category_no=1 ) sorted_product) rownum_product 
where idx >= 7 and idx <= 8;
--검색결과 상품리스트 보여주기 (페이지)
SELECT *
FROM (
    SELECT ROWNUM idx, sorted_product.*
    FROM (
        SELECT p_no, p_name, p_price, p_image, p_content, p_category_no
        FROM product
        WHERE REPLACE(LOWER(p_name), ' ', '') LIKE '%' || REPLACE(LOWER('airpodsmax'), ' ', '') || '%'
    ) sorted_product
)
WHERE idx >= 1 AND idx <= 24;
--상품 갯수 세기
select count(*) from product;

--카테고리별 상품 갯수 세기
select count(*) from product where p_category_no=1;

--검색한 상품 갯수 세기
select count(*) from product WHERE REPLACE(LOWER(p_name), ' ', '') LIKE REPLACE(LOWER('%'||'iphone'||'%'), ' ', '');



--상품 상세정보 보기
select p_no, p_name, p_price, p_image, p_content, p_category_no from product where p_no = 1;